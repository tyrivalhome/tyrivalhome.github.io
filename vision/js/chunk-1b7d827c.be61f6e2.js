(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b7d827c"],{"01ea":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"integration-design",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.7)"}},[n("IntePaint",{attrs:{config:t.config,state:t.state}}),n("InteLayout",{attrs:{config:t.config,state:t.state}}),n("InteConfig",{attrs:{config:t.config,state:t.state}}),n("IntePublisher",{attrs:{config:t.config,state:t.state.publisher}}),n("InteLoader",{attrs:{config:t.config,state:t.state.loader}}),n("Achievement",{attrs:{config:t.config,state:t.state.achievement}}),n("div",{staticClass:"integration-menu"}),n("div",{staticClass:"action"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发布",placement:"right"}},[n("el-button",{attrs:{type:"text"},on:{click:t.publish}},[n("i",{staticClass:"icon iconfont icon-plane"})])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"保存",placement:"right"}},[n("el-button",{attrs:{type:"text"},on:{click:t.save}},[n("i",{staticClass:"icon iconfont icon-save"})])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"预览",placement:"right"}},[n("el-button",{attrs:{type:"text"},on:{click:t.preview}},[n("i",{staticClass:"icon iconfont icon-view"})])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"导入",placement:"right"}},[n("el-button",{attrs:{type:"text"},on:{click:t.loader}},[n("i",{staticClass:"icon iconfont icon-upload"})])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"导出",placement:"right"}},[n("el-button",{attrs:{type:"text"},on:{click:t.exportConfig}},[n("i",{staticClass:"icon iconfont icon-download"})])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"退出",placement:"right"}},[n("el-button",{attrs:{type:"text"},on:{click:t.exit}},[n("i",{staticClass:"icon iconfont icon-exit"})])],1)],1)],1)},a=[],r=(n("a481"),n("1968"),[{name:"TopNav",text:"顶部菜单",image:""}]),o=r,c=n("a3be"),l=n("7638"),s=n("2ef0"),u=n.n(s),f=function(){return n.e("chunk-8e10306e").then(n.bind(null,"ab96"))},d=function(){return n.e("chunk-4eb39362").then(n.bind(null,"0cf3"))},h=function(){return n.e("chunk-d9edce56").then(n.bind(null,"d4d0"))},g=function(){return n.e("chunk-6b084e23").then(n.bind(null,"bed8"))},v=function(){return n.e("chunk-2d0deb80").then(n.bind(null,"879d"))},p=function(){return n.e("chunk-2d216484").then(n.bind(null,"c298"))},b={name:"Integration",data:function(){return{loading:!1,state:null,config:null}},created:function(){this.init()},methods:{init:function(){var t=this;this.state={layout:o,menu:{node:null,path:[]},loader:{visible:!1},publisher:{visible:!1},achievement:{visible:!1,item:null,url:null}},this.config={id:null,name:"未命名",cover:null,state:0,layout:null,base:{size:{width:1800,height:1200},backgroundColor:"rgba(0,0,0,0)",backgroundImage:null,scaleMode:"0",style:{backgroundColor:"#545c64",activeColor:null,item:{height:null,activeColor:null},font:{color:"#fff",activeColor:"#ffd04b",size:null}}},navigation:null};var e=this.$route.query.id;e?this.ajax({url:c["a"].INTEGRATION.GET_BY_ID,params:{id:e}}).then((function(e){var n=e.data;n||t.$message.error("错误：未找到可视化。"),"string"==typeof n.base&&(n.base=JSON.parse(n.base)),"string"==typeof n.navigation&&(n.navigation=JSON.parse(n.navigation)),t.config=n})).finally((function(){t.loading=!1})):this.loading=!1},getCurrentMenuNode:function(){var t=this.config.navigation,e=this.state.menu.path;if(!e.length)return t;for(var n=0;n<e.length;n++)t=t[e[n]].children;return t},save:function(){var t=this;if(this.config.layout){var e=this.formatConfigParam(this.config);this.ajax({url:c["a"].INTEGRATION.SAVE,method:l["a"].AJAX.POST,data:e}).then((function(e){t.config.id||(t.config.id=e.data.id),t.$message(l["a"].MESSAGE.SAVE_SUCCESS),t.$router.replace({query:{id:t.config.id}})}))}else this.$message.error("错误：未选择布局。")},formatConfigParam:function(t){var e=u.a.cloneDeep(t);for(var n in e){var i=e[n];u.a.isObject(i)&&(e[n]=JSON.stringify(i))}return e},publish:function(){this.state.publisher.visible=!0},preview:function(){var t=this,e=this.formatConfigParam(this.config);this.ajax({url:c["a"].INTEGRATION.PREVIEW,method:l["a"].AJAX.POST,data:e}).then((function(e){var n=t.$router.resolve({path:"./integration_presentation",query:{id:e.data.id}});window.open(n.href,"_blank")}))},loader:function(){this.state.loader.visible=!0},exportConfig:function(){var t=u.a.cloneDeep(this.config);t.id=null;var e=document.createElement("a"),n=new Blob([JSON.stringify(t,null,4)]);e.download="integration-"+(new Date).getTime()+".txt",e.href=URL.createObjectURL(n),e.click(),URL.revokeObjectURL(n)},exit:function(){var t=this;this.$confirm("退出编辑界面会丢失所有未保存的操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push("./overview")})).catch((function(){}))}},watch:{"state.menu.path":{deep:!0,handler:function(){this.state.menu.node=this.getCurrentMenuNode()}},"config.navigation":{deep:!0,handler:function(){this.state.menu.node=this.getCurrentMenuNode()}}},components:{InteLayout:f,InteConfig:d,IntePaint:h,InteLoader:v,IntePublisher:g,Achievement:p}},m=b,x=n("2877"),y=Object(x["a"])(m,i,a,!1,null,"b078ec14",null);e["default"]=y.exports},"02f4":function(t,e,n){var i=n("4588"),a=n("be13");t.exports=function(t){return function(e,n){var r,o,c=String(a(e)),l=i(n),s=c.length;return l<0||l>=s?t?"":void 0:(r=c.charCodeAt(l),r<55296||r>56319||l+1===s||(o=c.charCodeAt(l+1))<56320||o>57343?t?c.charAt(l):r:t?c.slice(l,l+2):o-56320+(r-55296<<10)+65536)}}},"0390":function(t,e,n){"use strict";var i=n("02f4")(!0);t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},"0bfb":function(t,e,n){"use strict";var i=n("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},1968:function(t,e,n){},"214f":function(t,e,n){"use strict";n("b0c5");var i=n("2aba"),a=n("32e9"),r=n("79e5"),o=n("be13"),c=n("2b4c"),l=n("520a"),s=c("species"),u=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var d=c(t),h=!r((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),g=h?!r((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[s]=function(){return n}),n[d](""),!e})):void 0;if(!h||!g||"replace"===t&&!u||"split"===t&&!f){var v=/./[d],p=n(o,d,""[t],(function(t,e,n,i,a){return e.exec===l?h&&!a?{done:!0,value:v.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}})),b=p[0],m=p[1];i(String.prototype,t,b),a(RegExp.prototype,d,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},"520a":function(t,e,n){"use strict";var i=n("0bfb"),a=RegExp.prototype.exec,r=String.prototype.replace,o=a,c="lastIndex",l=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t[c]||0!==e[c]}(),s=void 0!==/()??/.exec("")[1],u=l||s;u&&(o=function(t){var e,n,o,u,f=this;return s&&(n=new RegExp("^"+f.source+"$(?!\\s)",i.call(f))),l&&(e=f[c]),o=a.call(f,t),l&&o&&(f[c]=f.global?o.index+o[0].length:e),s&&o&&o.length>1&&r.call(o[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)})),o}),t.exports=o},"5f1b":function(t,e,n){"use strict";var i=n("23c6"),a=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var r=n.call(t,e);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},a481:function(t,e,n){"use strict";var i=n("cb7c"),a=n("4bf8"),r=n("9def"),o=n("4588"),c=n("0390"),l=n("5f1b"),s=Math.max,u=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,(function(t,e,n,v){return[function(i,a){var r=t(this),o=void 0==i?void 0:i[e];return void 0!==o?o.call(i,r,a):n.call(String(r),i,a)},function(t,e){var a=v(n,t,this,e);if(a.done)return a.value;var f=i(t),d=String(this),h="function"===typeof e;h||(e=String(e));var b=f.global;if(b){var m=f.unicode;f.lastIndex=0}var x=[];while(1){var y=l(f,d);if(null===y)break;if(x.push(y),!b)break;var C=String(y[0]);""===C&&(f.lastIndex=c(d,r(f.lastIndex),m))}for(var k="",w=0,I=0;I<x.length;I++){y=x[I];for(var E=String(y[0]),S=s(u(o(y.index),d.length),0),A=[],$=1;$<y.length;$++)A.push(g(y[$]));var R=y.groups;if(h){var N=[E].concat(A,S,d);void 0!==R&&N.push(R);var T=String(e.apply(void 0,N))}else T=p(E,d,S,A,R,e);S>=w&&(k+=d.slice(w,S)+T,w=S+E.length)}return k+d.slice(w)}];function p(t,e,i,r,o,c){var l=i+t.length,s=r.length,u=h;return void 0!==o&&(o=a(o),u=d),n.call(c,u,(function(n,a){var c;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(l);case"<":c=o[a.slice(1,-1)];break;default:var u=+a;if(0===u)return n;if(u>s){var d=f(u/10);return 0===d?n:d<=s?void 0===r[d-1]?a.charAt(1):r[d-1]+a.charAt(1):n}c=r[u-1]}return void 0===c?"":c}))}}))},b0c5:function(t,e,n){"use strict";var i=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})}}]);
//# sourceMappingURL=chunk-1b7d827c.be61f6e2.js.map