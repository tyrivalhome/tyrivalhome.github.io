(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4bd4"],{"3bb1":function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("el-dialog",{attrs:{width:"80%",title:"图库",visible:t.state.visible,"close-on-click-modal":!1},on:{"update:visible":function(i){return t.$set(t.state,"visible",i)}}},[e("div",{staticClass:"picture-container"},[t.list&&t.list.length?[t._l(t.list,(function(i,n){return[e("div",{key:n,staticClass:"picture-card",class:t.currentId===i.id?"active":"",on:{click:function(e){return t.choose(e,i)}}},[e("img",{attrs:{src:t.getPictureUrl(i.id)}}),e("div",{staticClass:"close",on:{click:function(e){return t.deletePicture(e,i)}}},[e("i",{staticClass:"icon iconfont icon-cross"})])])]}))]:t._e()],2),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return t.save(i)}}},[t._v("选 择")]),e("el-button",{attrs:{size:"mini"},on:{click:function(i){t.state.visible=!1}}},[t._v("取 消")])],1)])},s=[],r=e("a3be"),o=e("7638"),a=e("2ef0"),c=e.n(a),l={name:"PictureStore",props:["config","state"],data:function(){return{currentId:null,list:[]}},mounted:function(){this.loadProprietaryList()},methods:{choose:function(t,i){t.stopPropagation(),this.currentId=i.id},save:function(t){if(t.stopPropagation(),this.currentId){var i=this.getPictureUrl(this.currentId);c.a.set(this.state.item,this.state.prop,i),this.state.visible=!1}else this.$message({message:"未选择图片",type:"error"})},loadProprietaryList:function(){var t=this;this.ajax({url:r["a"].ATTACHMENT.LIST_PROPRIETARY,method:o["a"].AJAX.GET}).then((function(i){c.a.set(t,"list",i.data)}))},getPictureUrl:function(t){return r["a"].ATTACHMENT.DOWNLOAD+"?id="+t},deletePicture:function(t,i){var e=this;t.stopPropagation(),this.$confirm("图片删除后无法恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.ajax({url:r["a"].ATTACHMENT.DELETE_PROPRIETARY+"?id="+i.id,method:o["a"].AJAX.GET}).then((function(t){e.currentId===i.id&&(e.currentId=null),e.loadProprietaryList(),e.$message("删除成功")}))})).catch((function(){}))}}},u=l,d=e("2877"),f=Object(d["a"])(u,n,s,!1,null,"5e3a5d79",null);i["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0c4bd4.87acdb0f.js.map