(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3461acd6"],{"097d1":function(t,e,i){"use strict";var a=i("5fc1"),s=i.n(a);s.a},"5fc1":function(t,e,i){},"7f7f":function(t,e,i){var a=i("86cc").f,s=Function.prototype,n=/^\s*function ([^ (]*)/,l="name";l in s||i("9e1e")&&a(s,l,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},a5b3:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{width:"90%",top:"10px",visible:t.templateList.visible,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.templateList,"visible",e)}}},[i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"自定义模板",name:"first"}},[i("div",{staticClass:"template-list"},[t.template.list&&t.template.list.length?[t._l(t.template.list,(function(e,a){return[i("div",{key:a,staticClass:"card"},[e.cover?i("img",{attrs:{src:e.cover}}):t._e(),i("div",{staticClass:"title-bar"},[i("el-row",[i("el-col",{staticClass:"name",attrs:{span:24}},[t._v(t._s(e.name||"未命名"))])],1)],1),i("div",{staticClass:"toolbar"},[i("div",{staticClass:"delete"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[i("i",{staticClass:"icon iconfont icon-delete",on:{click:function(e){return t.deleteTemplate(a)}}})])],1),i("div",{staticClass:"edit"},[i("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(e){return t.seletTemplate(a)}}},[t._v(" 载入模板\n                                    ")])],1)])])]}))]:t._e()],2)]),i("el-tab-pane",{attrs:{label:"应用模板",name:"second"}},[i("div",{staticClass:"template-list"},[t.template.list&&t.template.list.length?[t._l(t.template.list,(function(e,a){return[i("div",{key:a,staticClass:"card"},[e.cover?i("img",{attrs:{src:e.cover}}):t._e(),i("div",{staticClass:"title-bar"},[i("el-row",[i("el-col",{staticClass:"name",attrs:{span:24}},[t._v(t._s(e.name||"未命名"))])],1)],1),i("div",{staticClass:"toolbar"},[i("div",{staticClass:"edit"},[i("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(e){return t.seletTemplate(a)}}},[t._v(" 载入模板\n                                    ")])],1)])])]}))]:t._e()],2)])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"first"===t.activeName,expression:"activeName==='first'"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:!1===t.templateList.isNew,expression:"templateList.isNew === false "}],attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.open("1")}}},[t._v("更新当前模板\n        ")]),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.open("0")}}},[t._v("保存为新模板")])],1)],1)},s=[],n=(i("7f7f"),i("ffc9"),i("a3be")),l=i("7638"),c=i("2ef0"),o=i.n(c),r={name:"TemplateList",props:{templateList:{type:Object},config:{type:Object}},data:function(){return{activeName:"first",type:"[[0,type,0,0]]",template:{index:null,list:null},subConfig:this.config}},mounted:function(){this.listTemplate()},methods:{handleClick:function(t,e){"first"===this.activeName?this.type="[[0,type,0,0]]":"second"===this.activeName&&(this.type="[[0,type,0,1]]"),this.listTemplate()},save:function(){var t=this,e=o.a.cloneDeep(this.templateList.dataSource);e.type=1,e.id="",e.category="模板风格类型预留",this.ajax({url:n["a"].TEMPLATE.SAVE,method:l["a"].AJAX.POST,data:e}).then((function(i){e.id||(e.id=i.data.id),t.$message(l["a"].MESSAGE.SAVE_SUCCESS),t.listTemplate()}))},update:function(){var t=this,e=o.a.cloneDeep(this.templateList.dataSource);e.type=1,this.ajax({url:n["a"].TEMPLATE.SAVE,method:l["a"].AJAX.POST,data:e}).then((function(i){e.id||(e.id=i.data.id),t.$message(l["a"].MESSAGE.SAVE_SUCCESS),t.listTemplate()}))},listTemplate:function(){var t=this;this.ajax({url:n["a"].TEMPLATE.LIST,method:l["a"].AJAX.POST,data:{filters:this.type}}).then((function(e){t.template.list=e.data}))},seletTemplate:function(t){var e=this.template.list[t].id;e&&("second"===this.activeName?(e="",this.$set(this.templateList,"isNew",!0)):this.$set(this.templateList,"isNew",!1)),this.$set(this.config,"id",e),this.$set(this.config,"name",this.template.list[t].name),this.$set(this.config,"base",JSON.parse(this.template.list[t].base)),this.$set(this.config,"sequence",JSON.parse(this.template.list[t].sequence)),this.$set(this.config,"components",JSON.parse(this.template.list[t].components)),this.templateList.visible=!1},deleteTemplate:function(t){var e=this;this.$confirm("模板删除后无法恢复, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.ajax({url:n["a"].TEMPLATE.DELETE,params:{id:e.template.list[t].id}}).then((function(i){e.template.list.splice(t,1),e.$message({message:i["message"],type:"success"})}))})).catch((function(){}))},open:function(t){var e=this;this.$prompt("请输入模板名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.templateList.dataSource.name}).then((function(i){var a=i.value;e.templateList.dataSource.name=a,"0"===t?e.save():"1"===t&&e.update()})).catch((function(){e.$message({type:"info",message:"取消保存"})}))}}},p=r,m=(i("097d1"),i("2877")),u=Object(m["a"])(p,a,s,!1,null,"f74982e4",null);e["default"]=u.exports},ffc9:function(t,e,i){}}]);
//# sourceMappingURL=chunk-3461acd6.58ccc64c.js.map