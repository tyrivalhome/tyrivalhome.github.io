(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53dc1038","chunk-2d0e2754"],{"01ea":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"integration-design",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.7)"}},[n("IntePaint",{attrs:{config:t.config,state:t.state}}),n("InteLayout",{attrs:{config:t.config,state:t.state}}),n("InteConfig",{attrs:{config:t.config,state:t.state}}),n("IntePublisher",{attrs:{config:t.config,state:t.state.publisher}}),n("InteLoader",{attrs:{config:t.config,state:t.state.loader}}),n("Achievement",{attrs:{config:t.config,state:t.state.achievement}}),n("div",{staticClass:"integration-menu"}),n("div",{staticClass:"action"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发布",placement:"right"}},[n("el-button",{attrs:{type:"text"},on:{click:t.publish}},[n("i",{staticClass:"icon iconfont icon-plane"})])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"保存",placement:"right"}},[n("el-button",{attrs:{type:"text"},on:{click:t.save}},[n("i",{staticClass:"icon iconfont icon-save"})])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"预览",placement:"right"}},[n("el-button",{attrs:{type:"text"},on:{click:t.preview}},[n("i",{staticClass:"icon iconfont icon-view"})])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"导入",placement:"right"}},[n("el-button",{attrs:{type:"text"},on:{click:t.loader}},[n("i",{staticClass:"icon iconfont icon-upload"})])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"导出",placement:"right"}},[n("el-button",{attrs:{type:"text"},on:{click:t.exportConfig}},[n("i",{staticClass:"icon iconfont icon-download"})])],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"退出",placement:"right"}},[n("el-button",{attrs:{type:"text"},on:{click:t.exit}},[n("i",{staticClass:"icon iconfont icon-exit"})])],1)],1)],1)},a=[],r=(n("a481"),n("1968"),[{name:"TopNav",text:"顶部菜单",image:""}]),o=r,s=n("a3be"),c=n("ab96"),l=n("0cf3"),u=n("d4d0"),f=n("bed8"),d=n("879d"),g=n("c298"),h=n("7638"),p=n("2ef0"),v=n.n(p),m={name:"Integration",data:function(){return{loading:!1,state:null,config:null}},created:function(){this.init()},methods:{init:function(){var t=this;this.state={layout:o,menu:{node:null,path:[]},loader:{visible:!1},publisher:{visible:!1},achievement:{visible:!1,item:null,url:null}},this.config={id:null,name:"未命名",cover:null,state:0,layout:null,base:{size:{width:1800,height:1200},backgroundColor:"rgba(0,0,0,0)",backgroundImage:null,scaleMode:"0",style:{backgroundColor:"#545c64",activeColor:null,item:{height:null,activeColor:null},font:{color:"#fff",activeColor:"#ffd04b",size:null}}},navigation:null};var e=this.$route.query.id;e?this.ajax({url:s["a"].INTEGRATION.GET_BY_ID,params:{id:e}}).then((function(e){var n=e.data;n||t.$message.error("错误：未找到可视化。"),"string"==typeof n.base&&(n.base=JSON.parse(n.base)),"string"==typeof n.navigation&&(n.navigation=JSON.parse(n.navigation)),t.config=n})).finally((function(){t.loading=!1})):this.loading=!1},getCurrentMenuNode:function(){var t=this.config.navigation,e=this.state.menu.path;if(!e.length)return t;for(var n=0;n<e.length;n++)t=t[e[n]].children;return t},save:function(){var t=this;if(this.config.layout){var e=this.formatConfigParam(this.config);this.ajax({url:s["a"].INTEGRATION.SAVE,method:h["a"].AJAX.POST,data:e}).then((function(e){t.config.id||(t.config.id=e.data.id),t.$message(h["a"].MESSAGE.SAVE_SUCCESS),t.$router.replace({query:{id:t.config.id}})}))}else this.$message.error("错误：未选择布局。")},formatConfigParam:function(t){var e=v.a.cloneDeep(t);for(var n in e){var i=e[n];v.a.isObject(i)&&(e[n]=JSON.stringify(i))}return e},publish:function(){this.state.publisher.visible=!0},preview:function(){var t=this,e=this.formatConfigParam(this.config);this.ajax({url:s["a"].INTEGRATION.PREVIEW,method:h["a"].AJAX.POST,data:e}).then((function(e){var n=t.$router.resolve({path:"./integration_presentation",query:{id:e.data.id}});window.open(n.href,"_blank")}))},loader:function(){this.state.loader.visible=!0},exportConfig:function(){var t=v.a.cloneDeep(this.config);t.id=null;var e=document.createElement("a"),n=new Blob([JSON.stringify(t,null,4)]);e.download="integration-"+(new Date).getTime()+".txt",e.href=URL.createObjectURL(n),e.click(),URL.revokeObjectURL(n)},exit:function(){var t=this;this.$confirm("退出编辑界面会丢失所有未保存的操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push("./overview")})).catch((function(){}))}},watch:{"state.menu.path":{deep:!0,handler:function(){this.state.menu.node=this.getCurrentMenuNode()}},"config.navigation":{deep:!0,handler:function(){this.state.menu.node=this.getCurrentMenuNode()}}},components:{InteLayout:c["default"],InteConfig:l["default"],IntePaint:u["default"],InteLoader:d["default"],IntePublisher:f["default"],Achievement:g["default"]}},b=m,y=n("2877"),x=Object(y["a"])(b,i,a,!1,null,"36dce133",null);e["default"]=x.exports},"02f4":function(t,e,n){var i=n("4588"),a=n("be13");t.exports=function(t){return function(e,n){var r,o,s=String(a(e)),c=i(n),l=s.length;return c<0||c>=l?t?"":void 0:(r=s.charCodeAt(c),r<55296||r>56319||c+1===l||(o=s.charCodeAt(c+1))<56320||o>57343?t?s.charAt(c):r:t?s.slice(c,c+2):o-56320+(r-55296<<10)+65536)}}},"0390":function(t,e,n){"use strict";var i=n("02f4")(!0);t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},"0a49":function(t,e,n){var i=n("9b43"),a=n("626a"),r=n("4bf8"),o=n("9def"),s=n("cd1c");t.exports=function(t,e){var n=1==t,c=2==t,l=3==t,u=4==t,f=6==t,d=5==t||f,g=e||s;return function(e,s,h){for(var p,v,m=r(e),b=a(m),y=i(s,h,3),x=o(b.length),k=0,C=n?g(e,x):c?g(e,0):void 0;x>k;k++)if((d||k in b)&&(p=b[k],v=y(p,k,m),t))if(n)C[k]=v;else if(v)switch(t){case 3:return!0;case 5:return p;case 6:return k;case 2:C.push(p)}else if(u)return!1;return f?-1:l||u?u:C}}},"0bfb":function(t,e,n){"use strict";var i=n("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0cf3":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"integration-config"},[n("el-tabs",{attrs:{type:"border-card",stretch:""}},[n("el-tab-pane",{attrs:{label:"系统属性",name:"0"}},[n("el-row",[n("el-col",{staticClass:"tag",attrs:{span:8}},[t._v("名称")]),n("el-col",{attrs:{span:16}},[n("el-input",{attrs:{size:"mini"},model:{value:t.config.name,callback:function(e){t.$set(t.config,"name",e)},expression:"config.name"}})],1)],1),n("el-row",[n("el-col",{staticClass:"tag",attrs:{span:8}},[t._v("封面图")]),n("el-col",{attrs:{span:16}},[n("el-input",{attrs:{placeholder:"请输入图片网址",size:"mini",clearable:""},model:{value:t.config.cover,callback:function(e){t.$set(t.config,"cover",e)},expression:"config.cover"}}),n("el-upload",{staticClass:"img-upload",attrs:{drag:"",headers:t.getToken(),action:t.getUploadUrl(),"before-upload":t.beforeUpload,"on-success":t.onSuccessCover,"on-Error":t.onError,"show-file-list":!1}},[t.config.cover?n("img",{staticClass:"img-preview",attrs:{src:t.config.cover}}):t._e(),n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),n("em",[t._v("点击上传")])])]),t.config.cover?n("div",{staticClass:"img-cover"},[n("i",{staticClass:"icon iconfont icon-delete",on:{click:function(e){return t.removeCoverImage()}}})]):t._e()],1)],1),n("el-row",[n("el-col",{staticClass:"tag",attrs:{span:8}},[t._v("屏幕大小")]),n("el-col",{attrs:{span:7}},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:t.config.base.size.width,callback:function(e){t.$set(t.config.base.size,"width",e)},expression:"config.base.size.width"}}),n("div",{staticClass:"description"},[t._v("宽度")])],1),n("el-col",{attrs:{span:7}},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:t.config.base.size.height,callback:function(e){t.$set(t.config.base.size,"height",e)},expression:"config.base.size.height"}}),n("div",{staticClass:"description"},[t._v("高度")])],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.resetSize()}}},[t._v("重置")])],1)],1),n("el-row",[n("el-col",{staticClass:"tag",attrs:{span:8}},[t._v("背景色")]),n("el-col",{attrs:{span:4}},[n("el-color-picker",{attrs:{size:"mini","show-alpha":""},model:{value:t.config.base.backgroundColor,callback:function(e){t.$set(t.config.base,"backgroundColor",e)},expression:"config.base.backgroundColor"}})],1),n("el-col",{attrs:{span:4}},[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.resetBgColor}},[t._v("重置")])],1)],1),n("el-row",[n("el-col",{staticClass:"tag",attrs:{span:8}},[t._v("背景图")]),n("el-col",{attrs:{span:16}},[n("el-input",{attrs:{placeholder:"请输入图片网址",size:"mini",clearable:""},model:{value:t.config.base.backgroundImage,callback:function(e){t.$set(t.config.base,"backgroundImage",e)},expression:"config.base.backgroundImage"}}),n("el-upload",{staticClass:"img-upload",attrs:{drag:"",headers:t.getToken(),action:t.getUploadUrl(),"before-upload":t.beforeUpload,"on-success":t.onSuccess,"on-Error":t.onError,"show-file-list":!1}},[t.config.base.backgroundImage?n("img",{staticClass:"img-preview",attrs:{src:t.config.base.backgroundImage}}):t._e(),n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),n("em",[t._v("点击上传")])])]),t.config.base.backgroundImage?n("div",{staticClass:"img-cover"},[n("i",{staticClass:"icon iconfont icon-delete",on:{click:function(e){return t.removeBgImage()}}})]):t._e()],1)],1),n("el-row",[n("el-col",{staticClass:"tag",attrs:{span:8}},[t._v("背景缩放方式")]),n("el-col",{attrs:{span:16}},[n("el-row",[n("el-radio",{attrs:{label:"0"},model:{value:t.config.base.scaleMode,callback:function(e){t.$set(t.config.base,"scaleMode",e)},expression:"config.base.scaleMode"}},[t._v("等比缩放宽度铺满")])],1),n("el-row",[n("el-radio",{attrs:{label:"1"},model:{value:t.config.base.scaleMode,callback:function(e){t.$set(t.config.base,"scaleMode",e)},expression:"config.base.scaleMode"}},[t._v("等比缩放高度铺满")])],1),n("el-row",[n("el-radio",{attrs:{label:"2"},model:{value:t.config.base.scaleMode,callback:function(e){t.$set(t.config.base,"scaleMode",e)},expression:"config.base.scaleMode"}},[t._v("全屏铺满")])],1)],1)],1)],1),n("el-tab-pane",{attrs:{label:"菜单配置",disabled:void 0===t.config.layout||null===t.config.layout}},[n("div",{staticClass:"integration-title"},[n("el-button",{staticClass:"add-item",attrs:{type:"primary",size:"mini"},on:{click:t.addItem}},[t._v("增加一级菜单")])],1),n("div",{staticClass:"integration-tree"},[n("el-tree",{attrs:{data:t.config.navigation,props:t.props,"node-key":"id","default-expand-all":"",draggable:"","allow-drop":t.allowDrop,"allow-drag":t.allowDrag,"expand-on-click-node":!1,"render-content":t.renderContent},on:{"node-drag-start":t.handleDragStart,"node-drag-enter":t.handleDragEnter,"node-drag-leave":t.handleDragLeave,"node-drag-over":t.handleDragOver,"node-drag-end":t.handleDragEnd,"node-drop":t.handleDrop,"node-click":t.selectItem},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,a=e.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[t._v(t._s(i.label))]),n("span",[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return t.append(a)}}},[t._v("增加子节点")]),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return t.remove(i,a)}}},[t._v("删除")])],1)])}}])})],1),n("div",{staticClass:"integration-detail"},[t.currentNode?n("el-row",[n("el-col",{staticClass:"tag",attrs:{span:8}},[t._v("文本")]),n("el-col",{attrs:{span:16}},[n("el-input",{attrs:{size:"mini"},model:{value:t.currentNode.text,callback:function(e){t.$set(t.currentNode,"text",e)},expression:"currentNode.text"}})],1)],1):t._e(),!t.currentNode||t.currentNode.children&&t.currentNode.children.length?t._e():[n("el-row",[n("el-col",{staticClass:"tag",attrs:{span:8}},[t._v("页面地址")]),n("el-col",{attrs:{span:13}},[n("el-input",{attrs:{size:"mini"},model:{value:t.currentNode.url,callback:function(e){t.$set(t.currentNode,"url",e)},expression:"currentNode.url"}})],1),n("el-col",{staticClass:"tag",attrs:{span:3}},[n("el-button",{staticClass:"el-icon-more",attrs:{circle:"",size:"mini"},on:{click:function(e){return t.openAchievementModal(t.currentNode)}}})],1)],1)]],2)])],1)],1)},a=[],r=(n("20d6"),n("7f7f"),n("a3be")),o=n("2ef0"),s=n.n(o),c={name:"InteConfig",props:["config","state"],data:function(){return{currentNode:null,props:{label:"text"},default:{bgColor:null,node:{text:"子节点",icon:"",image:"",url:"",children:[]}}}},created:function(){this.default.bgColor=this.config.base.backgroundColor},computed:{toggleBackButton:function(){return!!this.state.menu.path.length},getTitle:function(){return this.state.menu.path.length?this.state.menu.path.length+"级菜单":"根菜单"}},methods:{resetSize:function(){this.config.base.size=this.config.base.defaultStyle.size},resetBgColor:function(){this.config.base.backgroundColor=this.default.bgColor},beforeUpload:function(t){var e=t.name,n=e.substring(e.lastIndexOf(".")+1).toLowerCase();if("jpg"!==n&&"png"!==n&&"bmp"!==n&&"jpeg"!==n&&"gif"!==n)return this.$message({message:"只支持jpg、png、bmp文件",type:"error"}),!1},getUploadUrl:function(){return r["a"].ATTACHMENT.UPLOAD},getToken:function(){return{token:this.$store.state.token}},onSuccess:function(t){this.config.base.backgroundImage=r["a"].ATTACHMENT.DOWNLOAD+"?id="+t.data.id},onSuccessCover:function(t){this.config.cover=r["a"].ATTACHMENT.DOWNLOAD+"?id="+t.data.id},onError:function(t){this.$message({message:t.data.message,type:"error"})},removeBgImage:function(){this.config.base.backgroundImage=null},removeCoverImage:function(){this.config.cover=null},handleDragStart:function(t,e){console.log("drag start",t)},handleDragEnter:function(t,e,n){console.log("tree drag enter: ",e.label)},handleDragLeave:function(t,e,n){console.log("tree drag leave: ",e.label)},handleDragOver:function(t,e,n){console.log("tree drag over: ",e.label)},handleDragEnd:function(t,e,n,i){console.log("tree drag end: ",e&&e.label,n)},handleDrop:function(t,e,n,i){console.log("tree drop: ",e.label,n)},allowDrop:function(t,e,n){return"二级 3-1"!==e.data.label||"inner"!==n},allowDrag:function(t){return-1===t.data.label.indexOf("三级 3-2-2")},append:function(t){var e={text:"默认",icon:"",image:"",url:"",children:[]};t.children||this.$set(t,"children",[]),t.children.push(e)},remove:function(t,e){var n=t.parent,i=n.data.children||n.data,a=i.findIndex((function(t){return t.id===e.id}));i.splice(a,1)},renderContent:function(t,e){var n=this,i=e.node,a=e.data;e.store;return t("span",{class:"custom-tree-node"},[t("span",[i.label]),t("span",[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return n.append(a)}}},["增加子节点"]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return n.remove(i,a)}}},["删除"])])])},selectItem:function(t,e,n){this.$set(this,"currentNode",t)},addItem:function(){this.state.menu.node&&this.state.menu.node.length||(this.state.menu.node=[]),this.state.menu.node.push(this.generateNode())},generateNode:function(){var t=s.a.cloneDeep(this.default.node);return t.text+=this.state.menu.node.length+1,t},openAchievementModal:function(t){this.state.achievement.visible=!0,this.state.achievement.item=t}}},l=c,u=n("2877"),f=Object(u["a"])(l,i,a,!1,null,null,null);e["default"]=f.exports},1169:function(t,e,n){var i=n("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},1968:function(t,e,n){},"20d6":function(t,e,n){"use strict";var i=n("5ca1"),a=n("0a49")(6),r="findIndex",o=!0;r in[]&&Array(1)[r]((function(){o=!1})),i(i.P+i.F*o,"Array",{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(r)},"214f":function(t,e,n){"use strict";n("b0c5");var i=n("2aba"),a=n("32e9"),r=n("79e5"),o=n("be13"),s=n("2b4c"),c=n("520a"),l=s("species"),u=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var d=s(t),g=!r((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),h=g?!r((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[l]=function(){return n}),n[d](""),!e})):void 0;if(!g||!h||"replace"===t&&!u||"split"===t&&!f){var p=/./[d],v=n(o,d,""[t],(function(t,e,n,i,a){return e.exec===c?g&&!a?{done:!0,value:p.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}})),m=v[0],b=v[1];i(String.prototype,t,m),a(RegExp.prototype,d,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"28a5":function(t,e,n){"use strict";var i=n("aae3"),a=n("cb7c"),r=n("ebd6"),o=n("0390"),s=n("9def"),c=n("5f1b"),l=n("520a"),u=n("79e5"),f=Math.min,d=[].push,g="split",h="length",p="lastIndex",v=4294967295,m=!u((function(){RegExp(v,"y")}));n("214f")("split",2,(function(t,e,n,u){var b;return b="c"=="abbc"[g](/(b)*/)[1]||4!="test"[g](/(?:)/,-1)[h]||2!="ab"[g](/(?:ab)*/)[h]||4!="."[g](/(.?)(.?)/)[h]||"."[g](/()()/)[h]>1||""[g](/.?/)[h]?function(t,e){var a=String(this);if(void 0===t&&0===e)return[];if(!i(t))return n.call(a,t,e);var r,o,s,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,g=void 0===e?v:e>>>0,m=new RegExp(t.source,u+"g");while(r=l.call(m,a)){if(o=m[p],o>f&&(c.push(a.slice(f,r.index)),r[h]>1&&r.index<a[h]&&d.apply(c,r.slice(1)),s=r[0][h],f=o,c[h]>=g))break;m[p]===r.index&&m[p]++}return f===a[h]?!s&&m.test("")||c.push(""):c.push(a.slice(f)),c[h]>g?c.slice(0,g):c}:"0"[g](void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,i){var a=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,a,i):b.call(String(a),n,i)},function(t,e){var i=u(b,t,this,e,b!==n);if(i.done)return i.value;var l=a(t),d=String(this),g=r(l,RegExp),h=l.unicode,p=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(m?"y":"g"),y=new g(m?l:"^(?:"+l.source+")",p),x=void 0===e?v:e>>>0;if(0===x)return[];if(0===d.length)return null===c(y,d)?[d]:[];var k=0,C=0,S=[];while(C<d.length){y.lastIndex=m?C:0;var w,_=c(y,m?d:d.slice(C));if(null===_||(w=f(s(y.lastIndex+(m?0:C)),d.length))===k)C=o(d,C,h);else{if(S.push(d.slice(k,C)),S.length===x)return S;for(var E=1;E<=_.length-1;E++)if(S.push(_[E]),S.length===x)return S;C=k=w}}return S.push(d.slice(k)),S}]}))},"520a":function(t,e,n){"use strict";var i=n("0bfb"),a=RegExp.prototype.exec,r=String.prototype.replace,o=a,s="lastIndex",c=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t[s]||0!==e[s]}(),l=void 0!==/()??/.exec("")[1],u=c||l;u&&(o=function(t){var e,n,o,u,f=this;return l&&(n=new RegExp("^"+f.source+"$(?!\\s)",i.call(f))),c&&(e=f[s]),o=a.call(f,t),c&&o&&(f[s]=f.global?o.index+o[0].length:e),l&&o&&o.length>1&&r.call(o[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)})),o}),t.exports=o},"5f1b":function(t,e,n){"use strict";var i=n("23c6"),a=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var r=n.call(t,e);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"7f7f":function(t,e,n){var i=n("86cc").f,a=Function.prototype,r=/^\s*function ([^ (]*)/,o="name";o in a||n("9e1e")&&i(a,o,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},"879d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{width:"50%",title:"导入配置",visible:t.state.visible,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.state,"visible",e)}}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{type:"textarea",rows:12,size:"mini",resize:"none"},model:{value:t.integration,callback:function(e){t.integration=e},expression:"integration"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.save}},[t._v("载 入")]),n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.state.visible=!1}}},[t._v("取 消")])],1)],1)},a=[],r=n("7638"),o={name:"Loader",props:["config","state"],data:function(){return{rules:{integration:[{required:!0,message:"配置不可为空",trigger:"blur"}]},integration:null}},methods:{save:function(){try{var t=JSON.parse(this.integration);Object.assign(this.config,t),this.state.visible=!1,this.integration=null}catch(e){this.$message({message:r["a"].MESSAGE.JSON_PARSE_ERROR,type:"error"})}}}},s=o,c=n("2877"),l=Object(c["a"])(s,i,a,!1,null,"dda534bc",null);e["default"]=l.exports},"917d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"integration-presentation"},[n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":t.config.base.style.backgroundColor||t.defaultStyle.backgroundColor,"text-color":t.config.base.style.font.color||t.defaultStyle.textColor,"active-text-color":t.config.base.style.font.activeColor||t.defaultStyle.activeTextColor},on:{select:t.handleSelect}},[t.config.navigation&&t.config.navigation.length?[t._l(t.config.navigation,(function(e,i){return[e.children&&e.children.length?[n("el-submenu",{key:i,attrs:{index:i+""}},[n("template",{slot:"title"},[t._v(t._s(e.text))]),t._l(e.children,(function(e,a){return[e.children&&e.children.length?[n("el-submenu",{key:a,attrs:{index:i+"-"+a}},[n("template",{slot:"title"},[t._v(t._s(e.text))]),t._l(e.children,(function(e,r){return[n("el-menu-item",{key:r,attrs:{index:i+"-"+a+"-"+r}},[t._v(t._s(e.text)+"\n                                        ")])]}))],2)]:[n("el-menu-item",{key:a,attrs:{index:i+"-"+a}},[t._v(t._s(e.text))])]]}))],2)]:[n("el-menu-item",{key:i,attrs:{index:i+""}},[t._v(t._s(e.text))])]]}))]:t._e()],2),n("div",{staticClass:"integration-iframe",staticStyle:{top:"61px"}},[t.url?n("iframe",{staticClass:"integration-iframe",attrs:{src:t.url,frameborder:"0"}}):t._e()])],1)},a=[],r=(n("28a5"),n("2ef0")),o=n.n(r),s={name:"TopNav",props:["config","state"],data:function(){return{activeIndex:"",defaultStyle:{backgroundColor:"#545c64",textColor:"#ffffff",activeTextColor:"#ffd04b",size:{width:1366,height:768}},defaultMenu:[{text:"菜单1",icon:"",image:"",url:"",children:[{text:"子菜单1",icon:"",image:"",url:"",children:[{text:"选项1",icon:"",image:"",url:""},{text:"选项2",icon:"",image:"",url:""}]}]},{text:"菜单2",icon:"",image:"",url:""}],url:null}},mounted:function(){this.config.navigation||(this.config.navigation=this.defaultMenu),this.config.base.size=o.a.assignIn({},this.defaultStyle.size,this.config.base.size),this.config.base.defaultStyle=this.defaultStyle},methods:{handleSelect:function(t,e){var n=t.split("-"),i=parseInt(n[0]),a=this.config.navigation[i];if(n.length>1)for(var r=1;r<n.length;r++)i=parseInt(n[r]),a=a.children[i];this.url!==a.url&&(this.url=a.url)}}},c=s,l=n("2877"),u=Object(l["a"])(c,i,a,!1,null,"4ed1f320",null);e["default"]=u.exports},a481:function(t,e,n){"use strict";var i=n("cb7c"),a=n("4bf8"),r=n("9def"),o=n("4588"),s=n("0390"),c=n("5f1b"),l=Math.max,u=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,g=/\$([$&`']|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,(function(t,e,n,p){return[function(i,a){var r=t(this),o=void 0==i?void 0:i[e];return void 0!==o?o.call(i,r,a):n.call(String(r),i,a)},function(t,e){var a=p(n,t,this,e);if(a.done)return a.value;var f=i(t),d=String(this),g="function"===typeof e;g||(e=String(e));var m=f.global;if(m){var b=f.unicode;f.lastIndex=0}var y=[];while(1){var x=c(f,d);if(null===x)break;if(y.push(x),!m)break;var k=String(x[0]);""===k&&(f.lastIndex=s(d,r(f.lastIndex),b))}for(var C="",S=0,w=0;w<y.length;w++){x=y[w];for(var _=String(x[0]),E=l(u(o(x.index),d.length),0),I=[],T=1;T<x.length;T++)I.push(h(x[T]));var A=x.groups;if(g){var O=[_].concat(I,E,d);void 0!==A&&O.push(A);var N=String(e.apply(void 0,O))}else N=v(_,d,E,I,A,e);E>=S&&(C+=d.slice(S,E)+N,S=E+_.length)}return C+d.slice(S)}];function v(t,e,i,r,o,s){var c=i+t.length,l=r.length,u=g;return void 0!==o&&(o=a(o),u=d),n.call(s,u,(function(n,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(c);case"<":s=o[a.slice(1,-1)];break;default:var u=+a;if(0===u)return n;if(u>l){var d=f(u/10);return 0===d?n:d<=l?void 0===r[d-1]?a.charAt(1):r[d-1]+a.charAt(1):n}s=r[u-1]}return void 0===s?"":s}))}}))},aae3:function(t,e,n){var i=n("d3f4"),a=n("2d95"),r=n("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==a(t))}},ab96:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"integration-layout"},[t._l(t.state.layout,(function(e,i){return[n("div",{key:i,staticClass:"item",class:t.config.layout===e.name?"active":"",on:{click:function(n){return t.activeItem(n,e)}}},[n("img",{attrs:{src:"./img/components/navigation/"+e.name+".png"}}),n("span",[t._v(t._s(e.text))])])]}))],2)},a=[],r=(n("7f7f"),{name:"InteLayout",props:["config","state"],methods:{activeItem:function(t,e){this.config.layout!==e.name&&(this.config.layout=e.name)}}}),o=r,s=n("2877"),c=Object(s["a"])(o,i,a,!1,null,"452d4c69",null);e["default"]=c.exports},ae8a:function(t,e,n){var i={"./TopNav.vue":"917d"};function a(t){var e=r(t);return n(e)}function r(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=r,t.exports=a,a.id="ae8a"},b0c5:function(t,e,n){"use strict";var i=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},b311:function(t,e,n){
/*!
 * clipboard.js v2.0.4
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT © Zeno Rocha
 */
(function(e,n){t.exports=n()})(0,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),o=f(r),s=n(3),c=f(s),l=n(4),u=f(l);function f(t){return t&&t.__esModule?t:{default:t}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=function(t){function e(t,n){d(this,e);var i=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.resolveOptions(n),i.listenClick(t),i}return h(e,t),a(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"===typeof t.action?t.action:this.defaultAction,this.target="function"===typeof t.target?t.target:this.defaultTarget,this.text="function"===typeof t.text?t.text:this.defaultText,this.container="object"===i(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,u.default)(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new o.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return v("action",t)}},{key:"defaultTarget",value:function(t){var e=v("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return v("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"===typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach((function(t){n=n&&!!document.queryCommandSupported(t)})),n}}]),e}(c.default);function v(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}t.exports=p},function(t,e,n){"use strict";var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(2),o=s(r);function s(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(e){c(this,t),this.resolveOptions(e),this.initSelection()}return a(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,o.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,o.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==("undefined"===typeof t?"undefined":i(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=l},function(t,e){function n(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var i=window.getSelection(),a=document.createRange();a.selectNodeContents(t),i.removeAllRanges(),i.addRange(a),e=i.toString()}return e}t.exports=n},function(t,e){function n(){}n.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function a(){i.off(t,a),e.apply(n,arguments)}return a._=e,this.on(t,a,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,a=n.length;for(i;i<a;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],a=[];if(i&&e)for(var r=0,o=i.length;r<o;r++)i[r].fn!==e&&i[r].fn._!==e&&a.push(i[r]);return a.length?n[t]=a:delete n[t],this}},t.exports=n},function(t,e,n){var i=n(5),a=n(6);function r(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!i.string(e))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(t))return o(t,e,n);if(i.nodeList(t))return s(t,e,n);if(i.string(t))return c(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function s(t,e,n){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,n)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,n)}))}}}function c(t,e,n){return a(document.body,t,e,n)}t.exports=r},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"===typeof t||t instanceof String},e.fn=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},function(t,e,n){var i=n(7);function a(t,e,n,i,a){var r=o.apply(this,arguments);return t.addEventListener(n,r,a),{destroy:function(){t.removeEventListener(n,r,a)}}}function r(t,e,n,i,r){return"function"===typeof t.addEventListener?a.apply(null,arguments):"function"===typeof n?a.bind(null,document).apply(null,arguments):("string"===typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return a(t,e,n,i,r)})))}function o(t,e,n,a){return function(n){n.delegateTarget=i(n.target,e),n.delegateTarget&&a.call(t,n)}}t.exports=r},function(t,e){var n=9;if("undefined"!==typeof Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}function a(t,e){while(t&&t.nodeType!==n){if("function"===typeof t.matches&&t.matches(e))return t;t=t.parentNode}}t.exports=a}])}))},bed8:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{width:"50%",title:"可视化发布",visible:t.state.visible},on:{"update:visible":function(e){return t.$set(t.state,"visible",e)},open:t.onOpen}},[n("el-form",{ref:"dataSourceForm",attrs:{model:t.config.dataSource,size:"mini","label-width":"60px"}},[n("el-form-item",{attrs:{label:"发布"}},[n("el-switch",{attrs:{"inactive-color":"#a0a0a0","active-value":1,"inactive-value":0},on:{change:t.publish},model:{value:t.config.state,callback:function(e){t.$set(t.config,"state",e)},expression:"config.state"}})],1),n("el-form-item",{attrs:{label:"网址"}},[n("el-input",{attrs:{id:"publish-url",type:"textarea",size:"medium",rows:"2",readonly:""},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1),n("el-form-item",{attrs:{label:" "}},[n("el-button",{staticClass:"clipboard",attrs:{"data-clipboard-action":"copy","data-clipboard-target":"#publish-url",type:"primary",size:"mini"},on:{click:t.copyUrl}},[t._v("复制网址\n            ")])],1)],1)],1)},a=[],r=n("b311"),o=n.n(r),s=n("a3be"),c=n("7638"),l=n("2ef0"),u=n.n(l),f={name:"Publisher",props:["config","state"],data:function(){return{clipboard:null,url:""}},methods:{onOpen:function(){this.clipboard||(this.clipboard=new o.a(".clipboard"))},copyUrl:function(){var t=this;this.clipboard.on("success",(function(){t.$message({message:"复制成功！",type:"success"})})),this.clipboard.on("error",(function(){t.$message({message:"复制失败，请手动选择复制！",type:"error"})}))},publish:function(t){var e=this;this.config.state=t;var n=this.formatConfigParam(this.config);this.ajax({url:s["a"].INTEGRATION.PUBLISH,method:c["a"].AJAX.POST,data:n}).then((function(n){e.config.id=n.data.id,e.url="",t&&(e.url=s["a"].WEB_URL+"/integration_presentation?id="+n.data.id)}))},formatConfigParam:function(t){var e=u.a.cloneDeep(t);for(var n in e){var i=e[n];u.a.isObject(i)&&(e[n]=JSON.stringify(i))}return e}}},d=f,g=n("2877"),h=Object(g["a"])(d,i,a,!1,null,"7e59c4b7",null);e["default"]=h.exports},c298:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{width:"90%",top:"20px",visible:t.state.visible},on:{"update:visible":function(e){return t.$set(t.state,"visible",e)}}},[n("el-tabs",{model:{value:t.current.type,callback:function(e){t.$set(t.current,"type",e)},expression:"current.type"}},[n("el-tab-pane",{attrs:{label:"可视化成果",name:"screen"}},[n("div",{staticClass:"achievement-container"},[t.screen.list&&t.screen.list.length?[t._l(t.screen.list,(function(e,i){return[n("div",{key:i,staticClass:"card",class:"screen"===t.current.type&&t.current.screenIndex===i?"active":"",on:{click:function(n){return t.select(e,i)}}},[e.cover?[n("div",{staticClass:"img-cover"})]:[n("img",{staticClass:"img-cover",attrs:{src:e.cover}})],n("div",{staticClass:"title-bar"},[n("el-row",[n("el-col",{staticClass:"name",attrs:{span:18}},[t._v(t._s(e.name||"未命名"))]),n("el-col",{staticClass:"state",attrs:{span:6}},[n("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(n){return t.previewScreen(e.id)}}},[t._v("\n                                            预览\n                                        ")])],1)],1)],1)],2)]}))]:t._e()],2)]),n("el-tab-pane",{attrs:{label:"系统成果",name:"integration"}},[n("div",{staticClass:"achievement-container"},[t.integration.list&&t.integration.list.length?[t._l(t.integration.list,(function(e,i){return[n("div",{key:i,staticClass:"card",class:"integration"===t.current.type&&t.current.integrationIndex===i?"active":"",on:{click:function(n){return t.select(e,i)}}},[e.cover?[n("div",{staticClass:"img-cover"})]:[n("img",{staticClass:"img-cover",attrs:{src:e.cover}})],n("div",{staticClass:"title-bar"},[n("el-row",[n("el-col",{staticClass:"name",attrs:{span:18}},[t._v(t._s(e.name||"未命名"))]),n("el-col",{staticClass:"state",attrs:{span:6}},[n("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(n){return t.previewScreen(e.id)}}},[t._v("\n                                            预览\n                                        ")])],1)],1)],1)],2)]}))]:t._e()],2)])],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.state.visible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.loadAchievement}},[t._v("确 定")])],1)],1)},a=[],r=(n("a481"),n("a3be")),o=n("7638"),s=(n("2ef0"),{name:"Achievement",props:["config","state"],data:function(){return{current:{type:"screen",screenIndex:null,integrationIndex:null},screen:{list:[]},integration:{list:[]}}},mounted:function(){this.initAchievement()},methods:{initAchievement:function(){this.initScreen(),this.initIntegration()},initScreen:function(){var t=this;this.ajax({url:r["a"].SCREEN.LIST,method:o["a"].AJAX.POST,data:{}}).then((function(e){t.screen.list=e.data}))},initIntegration:function(){var t=this;this.ajax({url:r["a"].INTEGRATION.LIST,method:o["a"].AJAX.POST,data:{}}).then((function(e){t.screen.list=e.data}))},previewScreen:function(t){var e=this.$router.resolve({path:"./presentation",query:{id:t}});window.open(e.href,"_blank")},select:function(t,e){"screen"===this.current.type?(this.current.screenIndex=e,this.current.integrationIndex=null,this.state.url=window.location.href.replace(this.$route.path,"/presentation")+"?id="+t.id):(this.current.screenIndex=null,this.current.integrationIndex=e,this.state.url=window.location.href.replace(this.$route.path,"/integration_presentation")+"?id="+t.id)},loadAchievement:function(){this.state.visible=!1,this.state.item.url=this.state.url,this.state.url=null}}}),c=s,l=n("2877"),u=Object(l["a"])(c,i,a,!1,null,"3e968d1e",null);e["default"]=u.exports},cd1c:function(t,e,n){var i=n("e853");t.exports=function(t,e){return new(i(t))(e)}},d4d0:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"integration-paint"},[n("div",{staticClass:"bg-panel",style:t.calcBgStyle()},[n("div",{staticClass:"canvas-panel",staticStyle:{"background-repeat":"no-repeat","transform-origin":"0 0 0"},style:t.calcPaintStyle()},[t.config.layout?n(t.loader[t.config.layout].default,{tag:"component",attrs:{state:t.state,config:t.config}}):t._e()],1)]),n("div",{staticClass:"bottom-bar"},[n("div",{staticClass:"scale-bar"},[n("span",{staticClass:"icon iconfont icon-minus",on:{click:function(e){return t.scale(-1)}}}),n("el-slider",{attrs:{"show-tooltip":t.paintScale.showTooltip,min:t.paintScale.min,max:t.paintScale.max,step:t.paintScale.step},model:{value:t.paintScale.index,callback:function(e){t.$set(t.paintScale,"index",e)},expression:"paintScale.index"}}),n("span",{staticClass:"icon iconfont icon-plus",on:{click:function(e){return t.scale(1)}}})],1)])])},a=[],r=(n("7f7f"),{name:"IntePaint",props:["config","state"],data:function(){return{loader:{},paintScale:{showTooltip:!0,min:.25,max:2,step:.125,index:.375}}},created:function(){this.loadComponent()},methods:{calcBgStyle:function(){var t=this.paintScale.index;return{width:this.config.base.size.width*t+60+"px",height:this.config.base.size.height*t+60+"px"}},calcPaintStyle:function(){return{width:this.config.base.size.width+"px",height:this.config.base.size.height+"px",backgroundColor:this.config.base.backgroundColor,backgroundImage:this.config.base.backgroundImage?"url("+this.config.base.backgroundImage+")":"none",backgroundSize:this.calcBgImageSize(),transform:"scale("+this.paintScale.index+")"}},calcBgImageSize:function(){switch(this.config.base.scaleMode){case 1:return"auto 100%";case 2:return"100% 100%";default:return"100% auto"}},loadComponent:function(){if(this.state.layout&&this.state.layout.length)for(var t=0;t<this.state.layout.length;t++){var e=this.state.layout[t];e&&e.name&&!this.loader[e.name]&&(this.loader[e.name]=n("ae8a")("./"+e.name+".vue"))}},scale:function(t){this.paintScale.index+=t*this.paintScale.step}}}),o=r,s=n("2877"),c=Object(s["a"])(o,i,a,!1,null,"129abcda",null);e["default"]=c.exports},e853:function(t,e,n){var i=n("d3f4"),a=n("1169"),r=n("2b4c")("species");t.exports=function(t){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)||(e=void 0),i(e)&&(e=e[r],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-53dc1038.36a11766.js.map