(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78322721"],{"7f7f":function(e,t,i){var a=i("86cc").f,o=Function.prototype,s=/^\s*function ([^ (]*)/,n="name";n in o||i("9e1e")&&a(o,n,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},f051:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{width:"60%",top:"20px",title:"自定义组件",visible:e.state.editMode.visible,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.state.editMode,"visible",t)}}},[e.state.editMode.item?i("el-form",{attrs:{model:e.state.editMode.item,rules:e.rules,size:"small","label-width":"80px"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"名称",prop:"text"}},[i("el-input",{model:{value:e.state.editMode.item.text,callback:function(t){e.$set(e.state.editMode.item,"text",t)},expression:"state.editMode.item.text"}})],1)],1),i("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:12}},[i("el-form-item",{attrs:{label:"类型",prop:"category"}},[i("el-select",{on:{change:function(t){return e.changeCategory(t)}},model:{value:e.state.editMode.item.category,callback:function(t){e.$set(e.state.editMode.item,"category",t)},expression:"state.editMode.item.category"}},[e._l(e.dynamicComponents,(function(e,t){return[i("el-option",{key:t,attrs:{label:e.text,value:e.value}})]}))],2)],1)],1)],1),i("el-row",[i("el-form-item",{attrs:{label:"图片",prop:"image"}},[i("el-input",{attrs:{placeholder:"请输入图片网址",size:"mini",clearable:""},model:{value:e.state.editMode.item.image,callback:function(t){e.$set(e.state.editMode.item,"image",t)},expression:"state.editMode.item.image"}}),i("el-upload",{staticClass:"img-upload",attrs:{drag:"",headers:e.getToken(),action:e.getUploadUrl(),"before-upload":e.beforeUpload,"on-success":e.onSuccessCover,"on-Error":e.onError,"show-file-list":!1}},[e.state.editMode.item.image?i("img",{staticClass:"img-preview",attrs:{src:e.state.editMode.item.image}}):e._e(),i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])])]),e.state.editMode.item.image?i("div",{staticClass:"img-cover"},[i("i",{staticClass:"icon iconfont icon-delete",on:{click:function(t){return e.removeCoverImage()}}})]):e._e()],1)],1),i("el-form-item",{attrs:{label:"配置",prop:"config"}},[i("el-input",{attrs:{type:"textarea",rows:16,size:"mini",resize:"none"},model:{value:e.state.editMode.item.config,callback:function(t){e.$set(e.state.editMode.item,"config",t)},expression:"state.editMode.item.config"}})],1)],1):e._e(),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.save}},[e._v("保 存")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.state.editMode.visible=!1}}},[e._v("取 消")])],1)],1)},o=[],s=(i("7f7f"),i("7638")),n=i("a3be"),r={name:"DynamicComponentEdit",props:["config","state"],data:function(){return{dynamicComponents:s["a"].DYNAMIC_COMPONENTS,rules:{text:[{required:!0,message:"名称不可为空",trigger:"blur"}],category:[{required:!0,message:"类型不可为空",trigger:"blur"}],name:[{required:!0,message:"不可为空",trigger:"blur"}],image:[{required:!0,message:"配置不可为空",trigger:"blur"}],config:[{required:!0,message:"配置不可为空",trigger:"blur"}]}}},methods:{save:function(){var e=this;this.ajax({url:n["a"].DYNAMIC_COMPONENT.SAVE,method:s["a"].AJAX.POST,data:this.state.editMode.item}).then((function(t){t.success&&(e.$parent.loadDynamicComponent(),e.$message(s["a"].MESSAGE.SAVE_SUCCESS),e.state.editMode.visible=!1)}))},changeCategory:function(e){for(var t=0;t<this.dynamicComponents.length;t++){var i=this.dynamicComponents[t];if(i.value===e)return void(this.state.editMode.item.name=i.name)}},beforeUpload:function(e){var t=e.name,i=t.substring(t.lastIndexOf(".")+1).toLowerCase();if("jpg"!==i&&"png"!==i&&"bmp"!==i&&"jpeg"!==i&&"gif"!==i)return this.$message({message:"只支持jpg、png、bmp文件",type:"error"}),!1},getUploadUrl:function(){return n["a"].ATTACHMENT.UPLOAD},getToken:function(){return{token:this.$store.state.token}},onSuccessCover:function(e){this.state.editMode.item.image=n["a"].ATTACHMENT.DOWNLOAD+"?id="+e.data.id},onError:function(e){this.$message({message:e.data.message,type:"error"})},removeCoverImage:function(){this.state.editMode.item.image=null}}},l=r,c=i("2877"),d=Object(c["a"])(l,a,o,!1,null,"e24709bc",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-78322721.d6bac00f.js.map