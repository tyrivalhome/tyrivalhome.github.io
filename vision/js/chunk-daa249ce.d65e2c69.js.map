{"version":3,"sources":["webpack:///./src/components/datasource/form/DatabaseForm.vue?69f3","webpack:///src/components/datasource/form/DatabaseForm.vue","webpack:///./src/components/datasource/form/DatabaseForm.vue?3ac6","webpack:///./src/components/datasource/form/DatabaseForm.vue","webpack:///./src/components/datasource/DataSourceEdit.vue?59f6","webpack:///src/components/datasource/DataSourceEdit.vue","webpack:///./src/components/datasource/DataSourceEdit.vue?0237","webpack:///./src/components/datasource/DataSourceEdit.vue","webpack:///./src/components/datasource/form/ApiForm.vue?69ea","webpack:///src/components/datasource/form/ApiForm.vue","webpack:///./src/components/datasource/form/ApiForm.vue?026d","webpack:///./src/components/datasource/form/ApiForm.vue","webpack:///./src/components/datasource/form sync ^\\.\\/.*\\.vue$","webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/components/datasource/form/FileForm.vue?c09e","webpack:///src/components/datasource/form/FileForm.vue","webpack:///./src/components/datasource/form/FileForm.vue?68bd","webpack:///./src/components/datasource/form/FileForm.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","config","dataSource","rules","model","value","callback","$$v","$set","expression","_l","item","i","key","on","initDb","_v","staticRenderFns","component","id","visible","$event","type","desc","form","loader","mapper","default","tag","staticClass","slot","save","name","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","dP","f","FProto","Function","prototype","nameRE","NAME","configurable","get","match","getToken","getUploadUrl","beforeUpload","remove","onSuccess","onExceed","onError"],"mappings":"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","file":"js/chunk-daa249ce.d65e2c69.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"dbSourceForm\",attrs:{\"model\":_vm.config.dataSource,\"rules\":_vm.rules,\"size\":\"mini\",\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"域名/IP\",\"prop\":\"host\"}},[_c('el-input',{model:{value:(_vm.config.dataSource.host),callback:function ($$v) {_vm.$set(_vm.config.dataSource, \"host\", $$v)},expression:\"config.dataSource.host\"}})],1),_c('el-form-item',{attrs:{\"label\":\"端口\",\"prop\":\"port\"}},[_c('el-input',{model:{value:(_vm.config.dataSource.port),callback:function ($$v) {_vm.$set(_vm.config.dataSource, \"port\", $$v)},expression:\"config.dataSource.port\"}})],1),_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"userName\"}},[_c('el-input',{model:{value:(_vm.config.dataSource.userName),callback:function ($$v) {_vm.$set(_vm.config.dataSource, \"userName\", $$v)},expression:\"config.dataSource.userName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.config.dataSource.password),callback:function ($$v) {_vm.$set(_vm.config.dataSource, \"password\", $$v)},expression:\"config.dataSource.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"数据库\",\"prop\":\"db\"}},[_c('el-col',{attrs:{\"span\":16}},[_c('el-select',{attrs:{\"placeholder\":\"请选择数据库\"},model:{value:(_vm.config.dataSource.db),callback:function ($$v) {_vm.$set(_vm.config.dataSource, \"db\", $$v)},expression:\"config.dataSource.db\"}},_vm._l((_vm.db),function(item,i){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('el-col',{attrs:{\"span\":7,\"offset\":1}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":_vm.initDb}},[_vm._v(\"获取数据库列表\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <el-form :model=\"config.dataSource\"\r\n             :rules=\"rules\"\r\n             size=\"mini\"\r\n             label-width=\"80px\"\r\n             ref=\"dbSourceForm\">\r\n        <el-form-item label=\"域名/IP\" prop=\"host\">\r\n            <el-input v-model=\"config.dataSource.host\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"端口\" prop=\"port\">\r\n            <el-input v-model=\"config.dataSource.port\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"用户名\" prop=\"userName\">\r\n            <el-input v-model=\"config.dataSource.userName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n            <el-input v-model=\"config.dataSource.password\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"数据库\" prop=\"db\">\r\n            <el-col :span=\"16\">\r\n                <el-select v-model=\"config.dataSource.db\"\r\n                           placeholder=\"请选择数据库\">\r\n                    <el-option v-for=\"(item, i) in db\"\r\n                               :key=\"item\"\r\n                               :label=\"item\"\r\n                               :value=\"item\">\r\n                    </el-option>\r\n                </el-select>\r\n            </el-col>\r\n            <el-col :span=\"7\" :offset=\"1\">\r\n                <el-button size=\"mini\" type=\"primary\" plain @click=\"initDb\">获取数据库列表</el-button>\r\n            </el-col>\r\n        </el-form-item>\r\n    </el-form>\r\n</template>\r\n\r\n<script>\r\n    import CONST from '../../../config/const'\r\n    import API from '../../../config/api'\r\n\r\n    export default {\r\n        name: \"DatabaseForm\",\r\n        props: ['config'],\r\n        data() {\r\n            return {\r\n                rules: {\r\n                    host: [{required: true, message: '必须填写'}],\r\n                    port: [{required: true, message: '必须填写'}],\r\n                    userName: [{required: true, message: '必须填写'}],\r\n                    password: [{required: true, message: '必须填写'}],\r\n                    db: [{required: true, message: '必须填写'}],\r\n                },\r\n                db: []\r\n            }\r\n        },\r\n        mounted() {\r\n            if (this.config && this.config.dataSource.id && this.config.dataSource.id) {\r\n                this.initDb()\r\n            }\r\n        },\r\n        methods: {\r\n            /**\r\n             * 获得数据库列表\r\n             */\r\n            initDb() {\r\n                this.db = []\r\n                let ds = this.config.dataSource\r\n                this.ajax({\r\n                    url: API.DATA_SOURCE.LIST_DB,\r\n                    method: CONST.AJAX.POST,\r\n                    data: {\r\n                        host: ds.host,\r\n                        port: ds.port,\r\n                        userName: ds.userName,\r\n                        password: ds.password,\r\n                        type: ds.type\r\n                    },\r\n                }).then(response => {\r\n                    this.db = response.data\r\n                })\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DatabaseForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DatabaseForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DatabaseForm.vue?vue&type=template&id=3a7da4ee&scoped=true&\"\nimport script from \"./DatabaseForm.vue?vue&type=script&lang=js&\"\nexport * from \"./DatabaseForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3a7da4ee\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"width\":\"40%\",\"title\":_vm.config.dataSource.id ? '编辑数据源' : '新建数据源',\"visible\":_vm.config.visible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){return _vm.$set(_vm.config, \"visible\", $event)}}},[_c('el-form',{ref:\"dataSourceForm\",attrs:{\"model\":_vm.config.dataSource,\"rules\":_vm.rules,\"size\":\"mini\",\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.config.dataSource.name),callback:function ($$v) {_vm.$set(_vm.config.dataSource, \"name\", $$v)},expression:\"config.dataSource.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"类型\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择数据源类型\",\"default-first-option\":true},model:{value:(_vm.config.dataSource.type),callback:function ($$v) {_vm.$set(_vm.config.dataSource, \"type\", $$v)},expression:\"config.dataSource.type\"}},_vm._l((_vm.dataSourceType),function(item){return _c('el-option',{key:item.type,attrs:{\"label\":item.desc,\"value\":item.type}})}),1)],1)],1),_c(_vm.form.loader[_vm.form.mapper[_vm.config.dataSource.type]].default,{ref:\"subDsForm\",tag:\"component\",attrs:{\"config\":_vm.config}}),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"确 定\")]),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.config.visible = false}}},[_vm._v(\"取 消\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <el-dialog width=\"40%\"\r\n               :title=\"config.dataSource.id ? '编辑数据源' : '新建数据源'\"\r\n               :visible.sync=\"config.visible\"\r\n               :close-on-click-modal=\"false\">\r\n        <el-form :model=\"config.dataSource\"\r\n                 :rules=\"rules\"\r\n                 size=\"mini\"\r\n                 label-width=\"80px\"\r\n                 ref=\"dataSourceForm\">\r\n            <el-form-item label=\"名称\" prop=\"name\">\r\n                <el-input v-model=\"config.dataSource.name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"类型\">\r\n                <el-select v-model=\"config.dataSource.type\"\r\n                           placeholder=\"请选择数据源类型\"\r\n                           :default-first-option=\"true\">\r\n                    <el-option v-for=\"item in dataSourceType\"\r\n                               :key=\"item.type\"\r\n                               :label=\"item.desc\"\r\n                               :value=\"item.type\">\r\n                    </el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n        </el-form>\r\n        <component :is=\"form.loader[form.mapper[config.dataSource.type]].default\"\r\n                   ref=\"subDsForm\"\r\n                   :config=\"config\"></component>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button size=\"mini\" type=\"primary\" @click=\"save\">确 定</el-button>\r\n            <el-button size=\"mini\" @click=\"config.visible = false\">取 消</el-button>\r\n        </div>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script>\r\n    import API from '../../config/api'\r\n    import CONST from '../../config/const'\r\n    import _ from 'lodash'\r\n\r\n    export default {\r\n        name: \"DataSourceEdit\",\r\n        props: ['config'],\r\n        data() {\r\n            return {\r\n                rules: {\r\n                    name: [\r\n                        {required: true, message: '必须填写名称', trigger: 'blur'}\r\n                    ]\r\n                },\r\n                form: {\r\n                    mapper: {},\r\n                    url: {},\r\n                    loader: {}\r\n                },\r\n                dataSourceType: [{\r\n                    type: 'EXCEL',\r\n                    desc: 'XLS/CSV 文件',\r\n                    form: 'FileForm',\r\n                    url: API.DATA_SOURCE.SAVE_FILE,\r\n                }, {\r\n                    type: 'POSTGRESQL',\r\n                    desc: 'PostgreSQL数据库',\r\n                    form: 'DatabaseForm',\r\n                    url: API.DATA_SOURCE.SAVE_DATABASE,\r\n                }, {\r\n                    type: 'MYSQL',\r\n                    desc: 'MySQL数据库',\r\n                    form: 'DatabaseForm',\r\n                    url: API.DATA_SOURCE.SAVE_DATABASE,\r\n                }, {\r\n                    type: 'ORACLE',\r\n                    desc: 'Oracle数据库',\r\n                    form: 'DatabaseForm',\r\n                    url: API.DATA_SOURCE.SAVE_DATABASE,\r\n                }, {\r\n                    type: 'SQLSERVER',\r\n                    desc: 'SqlServer数据库',\r\n                    form: 'DatabaseForm',\r\n                    url: API.DATA_SOURCE.SAVE_DATABASE,\r\n                }]\r\n            }\r\n        },\r\n        created() {\r\n            this.loadForm()\r\n            // 新建时默认选中Excel文件\r\n            if (!this.config.dataSource) {\r\n                this.config.dataSource = _.assignIn({}, this.dataSourceType[0])\r\n            }\r\n        },\r\n        methods: {\r\n            /**\r\n             * 保存数据源\r\n             */\r\n            save() {\r\n                let dsForm = this.$refs.dataSourceForm\r\n                let subForm = this.$refs.subDsForm\r\n                dsForm.validate((res, obj) => {\r\n                    if (!res) {\r\n                        return\r\n                    }\r\n                    subForm.$children[0].validate((res, obj) => {\r\n                        if (!res) {\r\n                            return\r\n                        }\r\n                        let url = this.form.url[this.config.dataSource.type]\r\n                        this.ajax({\r\n                            url: url,\r\n                            method: CONST.AJAX.POST,\r\n                            data: this.config.dataSource,\r\n                        }).then(response => {\r\n                            if (response.success) {\r\n                                this.$message(CONST.MESSAGE.SAVE_SUCCESS)\r\n                                this.config.visible = false\r\n                            }\r\n                        })\r\n                    })\r\n                })\r\n            },\r\n            /**\r\n             * 动态加载表单\r\n             */\r\n            loadForm() {\r\n                for (let i = 0; i < this.dataSourceType.length; i++) {\r\n                    let item = this.dataSourceType[i]\r\n                    let form = item.form\r\n                    this.form.mapper[item.type] = form\r\n                    this.form.url[item.type] = item.url\r\n                    if (this.form.loader[form]) {\r\n                        continue\r\n                    }\r\n                    this.form.loader[form] = require(\"../../components/datasource/form/\" + form + \".vue\")\r\n                }\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataSourceEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataSourceEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataSourceEdit.vue?vue&type=template&id=54529620&scoped=true&\"\nimport script from \"./DataSourceEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./DataSourceEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54529620\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form-item',{attrs:{\"label\":\"url\",\"required\":\"\"}},[_c('el-input',{model:{value:(_vm.config.dataSource.url),callback:function ($$v) {_vm.$set(_vm.config.dataSource, \"url\", $$v)},expression:\"config.dataSource.url\"}})],1),_c('el-form-item',{attrs:{\"label\":\"协议\",\"required\":\"\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择协议类型\"},model:{value:(_vm.config.dataSource.protocol),callback:function ($$v) {_vm.$set(_vm.config.dataSource, \"protocol\", $$v)},expression:\"config.dataSource.protocol\"}},_vm._l((_vm.protocol),function(item,i){return _c('el-option',{key:item.name,attrs:{\"label\":item.name,\"value\":item.name}})}),1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <el-form-item label=\"url\" required>\r\n            <el-input v-model=\"config.dataSource.url\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"协议\" required>\r\n            <el-select v-model=\"config.dataSource.protocol\"\r\n                       placeholder=\"请选择协议类型\">\r\n                <el-option v-for=\"(item, i) in protocol\"\r\n                           :key=\"item.name\"\r\n                           :label=\"item.name\"\r\n                           :value=\"item.name\">\r\n                </el-option>\r\n            </el-select>\r\n        </el-form-item>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"ApiForm\",\r\n        props: ['config'],\r\n        data() {\r\n            return {\r\n                protocol: [\r\n                    {name: \"http\"},\r\n                    {name: \"https\"},\r\n                ]\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApiForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApiForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ApiForm.vue?vue&type=template&id=d93b1e12&scoped=true&\"\nimport script from \"./ApiForm.vue?vue&type=script&lang=js&\"\nexport * from \"./ApiForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d93b1e12\",\n  null\n  \n)\n\nexport default component.exports","var map = {\n\t\"./ApiForm.vue\": \"4ef4\",\n\t\"./DatabaseForm.vue\": \"288b\",\n\t\"./FileForm.vue\": \"8992\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"5fac\";","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{attrs:{\"model\":_vm.config.dataSource,\"rules\":_vm.rules,\"size\":\"mini\",\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"\",\"prop\":\"attachment\"}},[_c('el-upload',{attrs:{\"drag\":\"\",\"limit\":1,\"headers\":_vm.getToken(),\"action\":_vm.getUploadUrl(),\"before-upload\":_vm.beforeUpload,\"on-remove\":_vm.remove,\"on-success\":_vm.onSuccess,\"on-exceed\":_vm.onExceed,\"on-Error\":_vm.onError}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传xls、xlsx、csv文件\")])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <el-form :model=\"config.dataSource\"\r\n             :rules=\"rules\"\r\n             size=\"mini\"\r\n             label-width=\"80px\">\r\n        <el-form-item label=\"\" prop=\"attachment\">\r\n            <el-upload drag\r\n                       :limit=\"1\"\r\n                       :headers=\"getToken()\"\r\n                       :action=\"getUploadUrl()\"\r\n                       :before-upload=\"beforeUpload\"\r\n                       :on-remove=\"remove\"\r\n                       :on-success=\"onSuccess\"\r\n                       :on-exceed=\"onExceed\"\r\n                       :on-Error=\"onError\">\r\n                <i class=\"el-icon-upload\"></i>\r\n                <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n                <div class=\"el-upload__tip\" slot=\"tip\">只能上传xls、xlsx、csv文件</div>\r\n            </el-upload>\r\n        </el-form-item>\r\n    </el-form>\r\n</template>\r\n\r\n<script>\r\n    import API from '../../../config/api'\r\n    import CONST from '../../../config/const'\r\n\r\n    export default {\r\n        name: \"FileForm\",\r\n        props: ['config'],\r\n        data() {\r\n            let validateAttachment = (rule, value, callback) => {\r\n                if (!this.config.dataSource.attachmentId) {\r\n                    callback(new Error('请上传文件。'))\r\n                } else {\r\n                    callback()\r\n                }\r\n            }\r\n            return {\r\n                rules: {\r\n                    attachment: [\r\n                        {validator: validateAttachment, trigger: 'change'}\r\n                    ]\r\n                },\r\n            }\r\n        },\r\n        methods: {\r\n            /**\r\n             * 上传之前\r\n             */\r\n            beforeUpload(file) {\r\n                let name = file.name\r\n                let ext = name.substring(name.lastIndexOf(\".\") + 1).toLowerCase()\r\n                if (ext !== \"xls\" && ext !== \"xlsx\" && ext !== 'csv') {\r\n                    this.$message({\r\n                        message: \"只支持xls、xlsx、csv文件\",\r\n                        type: \"error\"\r\n                    })\r\n                    return false\r\n                }\r\n            },\r\n            /**\r\n             * 获取上传地址\r\n             */\r\n            getUploadUrl() {\r\n                return API.ATTACHMENT.UPLOAD\r\n            },\r\n            /**\r\n             * 获取token作文参数上传\r\n             */\r\n            getToken() {\r\n                return {token: this.$store.state.token}\r\n            },\r\n            /**\r\n             * 删除文件\r\n             */\r\n            remove(file, fileList) {\r\n                if (!this.config.dataSource.id) {\r\n                    return\r\n                }\r\n                this.ajax({\r\n                    url: API.ATTACHMENT.DELETE,\r\n                    params: {id: this.config.dataSource.id}\r\n                }).then(response => {\r\n                    if (response.data.success) {\r\n                        this.$message(CONST.MESSAGE.DELETE_SUCCESS)\r\n                    }\r\n                })\r\n                this.config.dataSource.id = null\r\n            },\r\n            /**\r\n             * 上传成功\r\n             */\r\n            onSuccess(res) {\r\n                this.config.dataSource.attachmentId = res.data.id\r\n            },\r\n            /**\r\n             * 上传失败\r\n             */\r\n            onError(err) {\r\n                this.$message({\r\n                    message: err.data.message,\r\n                    type: \"error\"\r\n                })\r\n            },\r\n            /**\r\n             * 文件超出限制\r\n             */\r\n            onExceed(files, fileList) {\r\n                this.$message({\r\n                    message: \"最多只可上传1个文件，请删除当前文件后再上传\",\r\n                    type: \"error\"\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FileForm.vue?vue&type=template&id=48386735&scoped=true&\"\nimport script from \"./FileForm.vue?vue&type=script&lang=js&\"\nexport * from \"./FileForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"48386735\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}